<div tal:define="view options/view; 
  history view/history;
  showChange view/showChange"
  tal:condition="history" class="history">
  <ul tal:condition="history">
		<tal:block repeat="entry history">
		  <li tal:define="p python:entry['published'] and 'published' or 'created';
		    c python:entry['changing'] and 'changing' or 'not-changing';"
  		  tal:attributes="id entry/id; class string:${p} ${c};">
  		  <span tal:condition="entry/published">Published</span>
  		  <span tal:condition="not:entry/published">Created</span>
  		  by
  		  <a href="#" class="fn"
  		    tal:condition="not:entry/editor/anonymous"
  		    tal:omit-tag="not:entry/editor/id"
  		    tal:content="entry/editor/name"
  		    tal:attributes="href entry/editor/url">Someone</a>
  		  <span
  		    tal:condition="entry/editor/anonymous">an anonymous 
  		      user</span>
  	    on
  			<span class="date"
  			  tal:content="entry/date">Today, Tomorrow, Timaru</span>
  			(<span class="size" tal:content="entry/size">Way Big</span>)
  			<tal:block condition="showChange">
    			<span tal:condition="entry/changing">Changing</span>
    			<a tal:condition="not:entry/changing" 
    			  href="#"
    			  tal:attributes="href string:edit_page.html?form.edited_version=${entry/id}">Change</a>
  			</tal:block>
  			<a href="#"
  			  tal:attributes="href string:?form.version=${entry/id}">View&#8230;</a>
      </li>
    </tal:block>
	</ul>
</div>

